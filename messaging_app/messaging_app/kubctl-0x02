#!/bin/bash

echo "ğŸ“¦ Deploying Blue version..."
kubectl apply -f blue_deployment.yaml

echo "ğŸ“¦ Deploying Green version..."
kubectl apply -f green_deployment.yaml

echo "ğŸŒ Applying Service to point to Blue version..."
kubectl apply -f kubeservice.yaml

echo "â³ Waiting for pods to initialize..."
sleep 10

echo "ğŸ” Checking logs for Green deployment..."
green_pod=$(kubectl get pods -l version=green -o jsonpath="{.items[0].metadata.name}")
kubectl logs "$green_pod"